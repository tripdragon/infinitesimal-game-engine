<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bleep bleep</title>
    <!-- <script src="mission1.js" type="module" defer></script> -->
    <!-- python3 -m http.server 8001 -->

    <style media="screen">
        *{
          margin: 0;
          padding: 0;
        }
    </style>

    <style media="screen">
      #controls{
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: 1;
        /* background: green; */
        width: 100px;
        height: 100px;
        padding: 20px 0 0 20px;
      }

      #controls .add{
        width: 22px;
        height: 22px;
      }
    </style>
  </head>

  <body>
    <canvas id="canvassss" width="400" height="400"></canvas>

    <div id="controls">
      <button class="add">+</button>
    </div>

    <div id="bodyInjectionPointMain"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/3.4.2/gl-matrix-min.js" type="text/javascript"></script>

    <script type="text/javascript">
        var APPPP;
        
        // these are needed here for now cause the gl-matrix plugin is not import type module
        // todo: swap out
        const { vec2, vec3, mat3, mat4 } = glMatrix;

        // APPPP.model1 = {
        //   pos.
        // }
    </script>

    <script type="module" type="text/javascript">
      import AppMain from './AppMain.js';
      APPPP = AppMain();
      
      import { randomBetween } from "./Modules/mathness.js";
      import { SquareLike } from "./Primitives/squareLike.js";
      
      {
        
        function addHipToBeSquare(ev){
          // console.log(ev, "fish");
          
          const xx = randomBetween(-40,40);
          const xy = randomBetween(-40,40);
          const ww = randomBetween(2,20);
          const wh = randomBetween(2,20);
          
          var sq1 = new SquareLike(null, -xx, xy, ww, wh);
          sq1.playCode = `return { do : function(obj, helpers){
            obj.x = helpers.randomBetween(${-xx},${xy});
            obj.color.x = Math.random();
            obj.color.y = Math.random();
            obj.color.z = Math.random();
          }}`;
          
          APPPP.sceneGrapth.add(sq1);

          
        }
        
        let controls = document.getElementById('controls');
        let add = controls.querySelector(".add");
        if(add){
            add.addEventListener( "click", addHipToBeSquare, false );
        }
      }
      
    </script>
  </body>
</html>
